<!-- <h3 class="page-title">Doctor Dashboard</h3>

<div class="card-custom mb">
  <div class="card-body-custom">
    <h5 class="section-title">Set Availability</h5>
    <div class="input-group-custom">
      <input class="form-input" [(ngModel)]="availability" placeholder="Mon–Fri 10:00–14:00">
      <button class="btn-primary" (click)="saveAvailability()">Save</button>
    </div>
    <div class="form-success" *ngIf="msg">{{msg}}</div>
    <div class="form-error" *ngIf="err">{{err}}</div>
  </div>
</div>

<h5 class="section-title">Today’s Appointments</h5>
<table class="table-custom table-striped-compact">
  <thead>
    <tr><th>Time</th><th>Patient</th><th>Status</th></tr>
  </thead>
  <tbody>
    <tr *ngFor="let a of appts">
      <td>{{a.appointment_date | date:'shortTime'}}</td>
      <td>{{a.patient?.user?.username || a.patient?.username}}</td>
      <td>{{a.status}}</td>
    </tr>
  </tbody>
</table>

<h3>Add Prescription</h3>
<div class="mb-3">
  <input class="form-control" [(ngModel)]="appointmentId" placeholder="Appointment ID" />
</div>
<div class="mb-3">
  <textarea class="form-control" [(ngModel)]="doctor_notes" placeholder="Doctor Notes"></textarea>
</div>
<div class="mb-3">
  <input class="form-control" [(ngModel)]="medicines" placeholder="Medicines" />
</div>
<button class="btn btn-primary" (click)="savePrescription()">Save</button>

<div class="text-success mt-2" *ngIf="msg">{{msg}}</div>
<div class="text-danger mt-2" *ngIf="err">{{err}}</div> -->


<h3 class="page-title">Doctor Dashboard</h3>

<!-- Availability card -->
<div class="card-custom mb">
  <div class="card-body-custom">
    <h5 class="section-title">Set Availability</h5>
    <div class="input-group-custom">
      <input class="form-input"
             [(ngModel)]="availability"
             [ngModelOptions]="{standalone:true}"
             placeholder="Mon–Fri 10:00–14:00">
      <button class="btn-primary" (click)="saveAvailability()">Save</button>
    </div>
    <div class="form-success" *ngIf="msg">{{msg}}</div>
    <div class="form-error" *ngIf="err">{{err}}</div>
  </div>
</div>

<!-- Today’s appointments -->
<h5 class="section-title">Today’s Appointments</h5>
<table class="table-custom table-striped-compact">
  <thead>
    <tr>
      <th>Time</th>
      <th>Patient</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let a of appts; trackBy: trackByAppt"
        (click)="selectAppt(a)"
        [class.row-selected]="selectedAppt && getApptId(selectedAppt) === getApptId(a)"
        style="cursor:pointer">
      <td>{{ a.appointment_date | date:'shortTime' }}</td>
      <td>{{ a.patient?.user?.username || a.patient?.username }}</td>
      <td>{{ a.status }}</td>
    </tr>
  </tbody>
</table>

<!-- Add Prescription -->
<h3 class="section-title" style="margin-top:16px">Add Prescription</h3>

<div class="form-group">
  <input class="form-input"
         [(ngModel)]="appointmentId"
         [ngModelOptions]="{standalone:true}"
         placeholder="Appointment ID (click a row above to auto-fill)">
</div>

<div class="form-group">
  <textarea class="form-input"
            rows="4"
            [(ngModel)]="doctor_notes"
            [ngModelOptions]="{standalone:true}"
            placeholder="Doctor Notes"></textarea>
</div>

<div class="form-group">
  <input class="form-input"
         [(ngModel)]="medicines"
         [ngModelOptions]="{standalone:true}"
         placeholder="Medicines (comma-separated)">
</div>

<button class="btn-primary" (click)="savePrescription()" [disabled]="isSaving">
  {{ isSaving ? 'Saving…' : 'Save' }}
</button>

<div class="form-success" *ngIf="msg">{{msg}}</div>
<div class="form-error" *ngIf="err">{{err}}</div>
